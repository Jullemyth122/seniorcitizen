import React, { useState } from 'react'
import '../scss/navbaradmin.scss'
import { Link, useNavigate } from 'react-router-dom'


const Navbar = ({ getImagePath, adminData }) => {

    const navigate = useNavigate()
    const [showOptions, setShowOptions] = useState(false);
    const [notifOptions, setNotifOptions] = useState(false);

    // Toggle the visibility of the options
    const toggleOptions = () => {
        setShowOptions(prevState => !prevState);
    };
    const togglenotifOptions = () => {
        setNotifOptions(prevState => !prevState);
    };

    // Logout function
    const handleLogout = () => {
        // Clear the localStorage data
        localStorage.removeItem('adminFormData');
        localStorage.removeItem('isAdminAuthenticated');
        
        // Update the authentication status in the context
        setIsAdminAuthenticated(false);

        // Redirect to the login page
        // window.location.reload();  // Force page reload
        
    };

    return (
        <div className='navbar-component flex items-center justify-between'>
            <div className="logo-text flex items-center justify-center gap-5">
                <img src="/img/imglogo.png" alt="" />
                <h1 className='text-xl font-bold'> ELDER EASE </h1>
            </div>
            <div className="search-temp flex items-center justify-center gap-5">
                <svg width="28" height="24" viewBox="0 0 28 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0.25 20V16.5C0.25 15.7917 0.4325 15.1409 0.7975 14.5475C1.1625 13.9542 1.64667 13.5009 2.25 13.1875C3.54167 12.5417 4.85417 12.0575 6.1875 11.735C7.52083 11.4125 8.875 11.2509 10.25 11.25C10.9167 11.25 11.5887 11.2867 12.2662 11.36C12.9437 11.4334 13.6154 11.5529 14.2812 11.7188C14.0104 12.0729 13.7763 12.4429 13.5788 12.8288C13.3813 13.2146 13.2196 13.6154 13.0938 14.0313C12.6146 13.9271 12.1408 13.8542 11.6725 13.8125C11.2042 13.7709 10.73 13.75 10.25 13.75C9.08333 13.75 7.92708 13.8909 6.78125 14.1725C5.63542 14.4542 4.5 14.8759 3.375 15.4375C3.1875 15.5417 3.03625 15.6875 2.92125 15.875C2.80625 16.0625 2.74917 16.2709 2.75 16.5V17.5H12.8438C12.9271 17.9584 13.0417 18.3959 13.1875 18.8125C13.3333 19.2292 13.5208 19.625 13.75 20H0.25ZM10.25 10C8.875 10 7.69792 9.51045 6.71875 8.53128C5.73958 7.55212 5.25 6.37503 5.25 5.00003C5.25 3.62503 5.73958 2.44795 6.71875 1.46878C7.69792 0.489616 8.875 3.20508e-05 10.25 3.20508e-05C11.625 3.20508e-05 12.8021 0.489616 13.7812 1.46878C14.7604 2.44795 15.25 3.62503 15.25 5.00003C15.25 6.37503 14.7604 7.55212 13.7812 8.53128C12.8021 9.51045 11.625 10 10.25 10ZM22.75 5.00003C22.75 6.37503 22.2604 7.55212 21.2812 8.53128C20.3021 9.51045 19.125 10 17.75 10C17.5208 10 17.2292 9.9742 16.875 9.92253C16.5208 9.87087 16.2292 9.81337 16 9.75003C16.5625 9.08337 16.995 8.34378 17.2975 7.53128C17.6 6.71878 17.7508 5.87503 17.75 5.00003C17.7492 4.12503 17.5983 3.28128 17.2975 2.46878C16.9967 1.65628 16.5642 0.916699 16 0.250032C16.2917 0.145865 16.5833 0.0779489 16.875 0.0462823C17.1667 0.0146156 17.4583 -0.000801283 17.75 3.20508e-05C19.125 3.20508e-05 20.3021 0.489616 21.2812 1.46878C22.2604 2.44795 22.75 3.62503 22.75 5.00003ZM10.25 7.50003C10.9375 7.50003 11.5263 7.25545 12.0163 6.76628C12.5063 6.27712 12.7508 5.68837 12.75 5.00003C12.7492 4.3117 12.5046 3.72337 12.0163 3.23503C11.5279 2.7467 10.9392 2.5017 10.25 2.50003C9.56083 2.49837 8.9725 2.74337 8.485 3.23503C7.9975 3.7267 7.7525 4.31503 7.75 5.00003C7.7475 5.68503 7.9925 6.27378 8.485 6.76628C8.9775 7.25878 9.56583 7.50337 10.25 7.50003ZM20.25 18.75C20.9583 18.75 21.5471 18.5417 22.0163 18.125C22.4854 17.7084 22.73 17.0834 22.75 16.25C22.7708 15.5417 22.5367 14.9479 22.0475 14.4688C21.5583 13.9896 20.9592 13.75 20.25 13.75C19.5408 13.75 18.9471 13.9896 18.4688 14.4688C17.9904 14.9479 17.7508 15.5417 17.75 16.25C17.7492 16.9584 17.9887 17.5521 18.4688 18.0313C18.9488 18.5104 19.5425 18.75 20.25 18.75ZM20.25 21.25C18.875 21.25 17.6979 20.7604 16.7188 19.7813C15.7396 18.8021 15.25 17.625 15.25 16.25C15.25 14.875 15.7396 13.6979 16.7188 12.7188C17.6979 11.7396 18.875 11.25 20.25 11.25C21.625 11.25 22.8021 11.7396 23.7812 12.7188C24.7604 13.6979 25.25 14.875 25.25 16.25C25.25 16.7292 25.1929 17.1825 25.0788 17.61C24.9646 18.0375 24.7925 18.4384 24.5625 18.8125L27.75 22L26 23.75L22.8125 20.5625C22.4375 20.7917 22.0367 20.9638 21.61 21.0788C21.1833 21.1938 20.73 21.2509 20.25 21.25Z" fill="black"/>
                </svg>
                <input type="text" name="search_citizen" id="" placeholder='Search Citizens. . .' />
            </div>
            <div className="notif-temp">
                <svg onClick={togglenotifOptions} width="22" height="28" viewBox="0 0 22 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fillRule="evenodd" clipRule="evenodd" d="M11 5C9.27609 5 7.62279 5.68482 6.40381 6.90381C5.18482 8.12279 4.5 9.77609 4.5 11.5V21.75H17.5V11.5C17.5 9.77609 16.8152 8.12279 15.5962 6.90381C14.3772 5.68482 12.7239 5 11 5ZM19.5 21.75V11.5C19.5 9.24566 18.6045 7.08365 17.0104 5.48959C15.4163 3.89553 13.2543 3 11 3C8.74566 3 6.58365 3.89553 4.98959 5.48959C3.39553 7.08365 2.5 9.24566 2.5 11.5V21.75H1C0.447715 21.75 0 22.1977 0 22.75C0 23.3023 0.447715 23.75 1 23.75H21C21.5523 23.75 22 23.3023 22 22.75C22 22.1977 21.5523 21.75 21 21.75H19.5ZM8.75 26.5C8.75 25.9477 9.19771 25.5 9.75 25.5H12.25C12.8023 25.5 13.25 25.9477 13.25 26.5C13.25 27.0523 12.8023 27.5 12.25 27.5H9.75C9.19771 27.5 8.75 27.0523 8.75 26.5Z" fill="black"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M11 2.5C10.8619 2.5 10.75 2.61193 10.75 2.75C10.75 2.88807 10.8619 3 11 3C11.1381 3 11.25 2.88807 11.25 2.75C11.25 2.61193 11.1381 2.5 11 2.5ZM8.75 2.75C8.75 1.50736 9.75736 0.5 11 0.5C12.2426 0.5 13.25 1.50736 13.25 2.75C13.25 3.99264 12.2426 5 11 5C9.75736 5 8.75 3.99264 8.75 2.75Z" fill="black"/>
                </svg>
                { notifOptions && 
                    <div className="notif-show">
                        <div className="notify-item diff">
                            <h1> Notifications: </h1>
                            <h1> Date: </h1>
                        </div>
                        <div className="notify-item">
                            <div className="notif-type">
                                <div className="notif-nm">
                                    <svg width="28" height="24" viewBox="0 0 28 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0.25 20V16.5C0.25 15.7917 0.4325 15.1409 0.7975 14.5475C1.1625 13.9542 1.64667 13.5009 2.25 13.1875C3.54167 12.5417 4.85417 12.0575 6.1875 11.735C7.52083 11.4125 8.875 11.2509 10.25 11.25C10.9167 11.25 11.5887 11.2867 12.2662 11.36C12.9437 11.4334 13.6154 11.5529 14.2812 11.7188C14.0104 12.0729 13.7763 12.4429 13.5788 12.8288C13.3813 13.2146 13.2196 13.6154 13.0938 14.0313C12.6146 13.9271 12.1408 13.8542 11.6725 13.8125C11.2042 13.7709 10.73 13.75 10.25 13.75C9.08333 13.75 7.92708 13.8909 6.78125 14.1725C5.63542 14.4542 4.5 14.8759 3.375 15.4375C3.1875 15.5417 3.03625 15.6875 2.92125 15.875C2.80625 16.0625 2.74917 16.2709 2.75 16.5V17.5H12.8438C12.9271 17.9584 13.0417 18.3959 13.1875 18.8125C13.3333 19.2292 13.5208 19.625 13.75 20H0.25ZM10.25 10C8.875 10 7.69792 9.51045 6.71875 8.53128C5.73958 7.55212 5.25 6.37503 5.25 5.00003C5.25 3.62503 5.73958 2.44795 6.71875 1.46878C7.69792 0.489616 8.875 3.20508e-05 10.25 3.20508e-05C11.625 3.20508e-05 12.8021 0.489616 13.7812 1.46878C14.7604 2.44795 15.25 3.62503 15.25 5.00003C15.25 6.37503 14.7604 7.55212 13.7812 8.53128C12.8021 9.51045 11.625 10 10.25 10ZM22.75 5.00003C22.75 6.37503 22.2604 7.55212 21.2812 8.53128C20.3021 9.51045 19.125 10 17.75 10C17.5208 10 17.2292 9.9742 16.875 9.92253C16.5208 9.87087 16.2292 9.81337 16 9.75003C16.5625 9.08337 16.995 8.34378 17.2975 7.53128C17.6 6.71878 17.7508 5.87503 17.75 5.00003C17.7492 4.12503 17.5983 3.28128 17.2975 2.46878C16.9967 1.65628 16.5642 0.916699 16 0.250032C16.2917 0.145865 16.5833 0.0779489 16.875 0.0462823C17.1667 0.0146156 17.4583 -0.000801283 17.75 3.20508e-05C19.125 3.20508e-05 20.3021 0.489616 21.2812 1.46878C22.2604 2.44795 22.75 3.62503 22.75 5.00003ZM10.25 7.50003C10.9375 7.50003 11.5263 7.25545 12.0163 6.76628C12.5063 6.27712 12.7508 5.68837 12.75 5.00003C12.7492 4.3117 12.5046 3.72337 12.0163 3.23503C11.5279 2.7467 10.9392 2.5017 10.25 2.50003C9.56083 2.49837 8.9725 2.74337 8.485 3.23503C7.9975 3.7267 7.7525 4.31503 7.75 5.00003C7.7475 5.68503 7.9925 6.27378 8.485 6.76628C8.9775 7.25878 9.56583 7.50337 10.25 7.50003ZM20.25 18.75C20.9583 18.75 21.5471 18.5417 22.0163 18.125C22.4854 17.7084 22.73 17.0834 22.75 16.25C22.7708 15.5417 22.5367 14.9479 22.0475 14.4688C21.5583 13.9896 20.9592 13.75 20.25 13.75C19.5408 13.75 18.9471 13.9896 18.4688 14.4688C17.9904 14.9479 17.7508 15.5417 17.75 16.25C17.7492 16.9584 17.9887 17.5521 18.4688 18.0313C18.9488 18.5104 19.5425 18.75 20.25 18.75ZM20.25 21.25C18.875 21.25 17.6979 20.7604 16.7188 19.7813C15.7396 18.8021 15.25 17.625 15.25 16.25C15.25 14.875 15.7396 13.6979 16.7188 12.7188C17.6979 11.7396 18.875 11.25 20.25 11.25C21.625 11.25 22.8021 11.7396 23.7812 12.7188C24.7604 13.6979 25.25 14.875 25.25 16.25C25.25 16.7292 25.1929 17.1825 25.0788 17.61C24.9646 18.0375 24.7925 18.4384 24.5625 18.8125L27.75 22L26 23.75L22.8125 20.5625C22.4375 20.7917 22.0367 20.9638 21.61 21.0788C21.1833 21.1938 20.73 21.2509 20.25 21.25Z" fill="black"/>
                                    </svg>
                                </div>
                                <div className="notif-text">
                                    <h1 className='font-bold'> Important Notice </h1>
                                    <h1> Important Notice </h1>
                                </div>
                            </div>
                            <div className="notif-date">
                                <h5> Oct 7, 2024 </h5>
                            </div>
                        </div>
                        <div className="notify-item">
                            <div className="notif-type">
                                <div className="notif-nm">
                                    <svg width="28" height="24" viewBox="0 0 28 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0.25 20V16.5C0.25 15.7917 0.4325 15.1409 0.7975 14.5475C1.1625 13.9542 1.64667 13.5009 2.25 13.1875C3.54167 12.5417 4.85417 12.0575 6.1875 11.735C7.52083 11.4125 8.875 11.2509 10.25 11.25C10.9167 11.25 11.5887 11.2867 12.2662 11.36C12.9437 11.4334 13.6154 11.5529 14.2812 11.7188C14.0104 12.0729 13.7763 12.4429 13.5788 12.8288C13.3813 13.2146 13.2196 13.6154 13.0938 14.0313C12.6146 13.9271 12.1408 13.8542 11.6725 13.8125C11.2042 13.7709 10.73 13.75 10.25 13.75C9.08333 13.75 7.92708 13.8909 6.78125 14.1725C5.63542 14.4542 4.5 14.8759 3.375 15.4375C3.1875 15.5417 3.03625 15.6875 2.92125 15.875C2.80625 16.0625 2.74917 16.2709 2.75 16.5V17.5H12.8438C12.9271 17.9584 13.0417 18.3959 13.1875 18.8125C13.3333 19.2292 13.5208 19.625 13.75 20H0.25ZM10.25 10C8.875 10 7.69792 9.51045 6.71875 8.53128C5.73958 7.55212 5.25 6.37503 5.25 5.00003C5.25 3.62503 5.73958 2.44795 6.71875 1.46878C7.69792 0.489616 8.875 3.20508e-05 10.25 3.20508e-05C11.625 3.20508e-05 12.8021 0.489616 13.7812 1.46878C14.7604 2.44795 15.25 3.62503 15.25 5.00003C15.25 6.37503 14.7604 7.55212 13.7812 8.53128C12.8021 9.51045 11.625 10 10.25 10ZM22.75 5.00003C22.75 6.37503 22.2604 7.55212 21.2812 8.53128C20.3021 9.51045 19.125 10 17.75 10C17.5208 10 17.2292 9.9742 16.875 9.92253C16.5208 9.87087 16.2292 9.81337 16 9.75003C16.5625 9.08337 16.995 8.34378 17.2975 7.53128C17.6 6.71878 17.7508 5.87503 17.75 5.00003C17.7492 4.12503 17.5983 3.28128 17.2975 2.46878C16.9967 1.65628 16.5642 0.916699 16 0.250032C16.2917 0.145865 16.5833 0.0779489 16.875 0.0462823C17.1667 0.0146156 17.4583 -0.000801283 17.75 3.20508e-05C19.125 3.20508e-05 20.3021 0.489616 21.2812 1.46878C22.2604 2.44795 22.75 3.62503 22.75 5.00003ZM10.25 7.50003C10.9375 7.50003 11.5263 7.25545 12.0163 6.76628C12.5063 6.27712 12.7508 5.68837 12.75 5.00003C12.7492 4.3117 12.5046 3.72337 12.0163 3.23503C11.5279 2.7467 10.9392 2.5017 10.25 2.50003C9.56083 2.49837 8.9725 2.74337 8.485 3.23503C7.9975 3.7267 7.7525 4.31503 7.75 5.00003C7.7475 5.68503 7.9925 6.27378 8.485 6.76628C8.9775 7.25878 9.56583 7.50337 10.25 7.50003ZM20.25 18.75C20.9583 18.75 21.5471 18.5417 22.0163 18.125C22.4854 17.7084 22.73 17.0834 22.75 16.25C22.7708 15.5417 22.5367 14.9479 22.0475 14.4688C21.5583 13.9896 20.9592 13.75 20.25 13.75C19.5408 13.75 18.9471 13.9896 18.4688 14.4688C17.9904 14.9479 17.7508 15.5417 17.75 16.25C17.7492 16.9584 17.9887 17.5521 18.4688 18.0313C18.9488 18.5104 19.5425 18.75 20.25 18.75ZM20.25 21.25C18.875 21.25 17.6979 20.7604 16.7188 19.7813C15.7396 18.8021 15.25 17.625 15.25 16.25C15.25 14.875 15.7396 13.6979 16.7188 12.7188C17.6979 11.7396 18.875 11.25 20.25 11.25C21.625 11.25 22.8021 11.7396 23.7812 12.7188C24.7604 13.6979 25.25 14.875 25.25 16.25C25.25 16.7292 25.1929 17.1825 25.0788 17.61C24.9646 18.0375 24.7925 18.4384 24.5625 18.8125L27.75 22L26 23.75L22.8125 20.5625C22.4375 20.7917 22.0367 20.9638 21.61 21.0788C21.1833 21.1938 20.73 21.2509 20.25 21.25Z" fill="black"/>
                                    </svg>
                                </div>
                                <div className="notif-text">
                                    <h1 className='font-bold'> Important Notice </h1>
                                    <h1> Important Notice </h1>
                                </div>
                            </div>
                            <div className="notif-date">
                                <h5> Oct 7, 2024 </h5>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div className="account-temp flex items-center justify-center gap-4">
                {adminData ? (
                    <>
                        <img
                            src={getImagePath(adminData.image)}  // Get the cleaned image path
                            alt="Admin Profile"
                            className="admin-profile-image"
                        />
                        <h1>
                            {`${adminData.firstname} ${adminData.surname}`}
                        </h1>
                    </>
                ) : (
                    <h1>Loading...</h1>
                )}
                <div className="slide-option">
                    <svg onClick={toggleOptions} 
                        className={`svg-icon ${showOptions ? 'rotated' : ''}`} // Apply rotation class when options are shown
                        width="10" 
                        height="8" 
                        viewBox="0 0 10 8" 
                        fill="none" 
                        xmlns="http://www.w3.org/2000/svg"
                    >
                    <path d="M4.20022 6.78375L0.20147 2.23875C-0.29228 1.67625 0.177719 0.875 1.00147 0.875H9.00022C9.82397 0.875 10.294 1.67625 9.80022 2.2375L5.80022 6.78375C5.40022 7.23875 4.60147 7.23875 4.20147 6.78375" fill="black"/>
                    </svg>
                    {showOptions && (
                        <div className="option-show">
                            <Link to={'/admin/accountsettings'}>
                                <h1> Account Settings </h1>
                            </Link>
                            <Link to={'/admin/systemsettings'}>
                                <h1> System Settings </h1>
                            </Link>
                            <Link to={'/admin/login'} onClick={handleLogout}>
                                <h1> Logout </h1>
                            </Link>
                        </div>
                    )}
                </div>
            </div>
        
        </div>
    )
}

export default Navbar